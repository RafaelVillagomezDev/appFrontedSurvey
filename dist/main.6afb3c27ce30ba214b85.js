(()=>{var e,t,a,n={383:(e,t,a)=>{"use strict";var n=a(294),r=a(745),l=a(335),o=a(655),c=a(633),s=a(866);const i=(e,t)=>{try{window.localStorage.setItem(e,JSON.stringify(t))}catch(e){console.log(e)}},m=e=>{try{const t=window.localStorage.getItem(e);if("undefined"!=t)return JSON.parse(t)}catch(e){console.log(e)}},u=(0,c.hg)("loginSlice/fetchLogin",(async e=>{const t=await(0,s.getAuthUser)(e);return i("token",t.token),t})),d=(0,c.oM)({name:"login",initialState:{user:[]},reducers:{},extraReducers:e=>{e.addCase(u.pending,(e=>{e.status="loading"})).addCase(u.fulfilled,((e,t)=>{e.status="success",e.user=t.payload.data,i("user",t.payload.data)})).addCase(u.rejected,(e=>{e.status="failed"}))}}),{login:E}=d.actions,p=d.reducer,v=(0,c.hg)("surveySlice/fetchSurvey",(async e=>await(async e=>{const t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"BEARER "+e}};try{const e=await fetch("http://localhost:3445/api/v1/survey",t);return await e.json()}catch(e){console.error(e)}})(e))),f=(0,c.hg)("surveySlice/createSurvey",(async e=>await(async e=>{const{dni:t,producto:a,mantenimiento:n,tipo_mantenimiento:r,estado:l}=e,o={method:"POST",headers:{"Content-Type":"application/json",Authorization:"BEARER "+m("token")},body:JSON.stringify({dni:t,mantenimiento:n,tipo_mantenimiento:r,producto:a,estado:l,id_subproducto:""})};try{const e=await fetch("http://localhost:3445/api/v1/survey/create",o),t=await e.json();return console.log(t),t}catch(e){console.error(e)}})(e))),h=(0,c.hg)("surveySlice/deleteSurvey",(async e=>{const t=await(async e=>{const{id_encuesta:t,token:a}=e,n={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"BEARER "+a}};try{const e=await fetch(`http://localhost:3445/api/v1/survey/delete/${t}`,n);return await e.json()}catch(e){console.error(e)}})(e);return t})),b=(0,c.oM)({name:"survey",initialState:{survey:[],status:"idle"},reducers:{},extraReducers:e=>{e.addCase(v.pending,(e=>{e.status="loading"})),e.addCase(v.fulfilled,((e,t)=>{e.status="success",e.survey=t.payload.data})),e.addCase(v.rejected,(e=>{e.status="failed"})),e.addCase(h.pending,(e=>{e.status="loading"})),e.addCase(h.fulfilled,((e,t)=>{e.status="success";const a=e.survey.findIndex((e=>e.id_encuesta===t.payload.id));e.survey.splice(a,1)})),e.addCase(h.rejected,(e=>{e.status="failed"})),e.addCase(f.pending,(e=>{e.status="loading"})),e.addCase(f.fulfilled,((e,t)=>{e.status="success"})),e.addCase(f.rejected,(e=>{e.status="failed"}))}}),{}=b.actions,y=b.reducer,g=(0,c.xC)({reducer:{login:p,survey:y}});var _=a(998),N=a(953),O=(a(302),a(245));const S=a.p+"public/assets/img/bf67b35ec7c66971de982c668f197544.jpg";var w=a(6);const C=function(){const e=(0,_.I0)(),[t,a]=(0,n.useState)(""),[r,o]=(0,n.useState)(""),c=(0,l.s0)();return n.createElement("div",{id:"main"},n.createElement("div",{id:"main_container-portada"},n.createElement(w.LazyLoadImage,{src:S,id:"img_portada",alt:"Portada gas"})),n.createElement("div",{id:"main_container_form"},n.createElement("form",{id:"form"},n.createElement("div",{className:"form_div"},n.createElement("div",{className:"form_div-group"},n.createElement("label",{htmlFor:"email"},"Email"),n.createElement("input",{id:"email",type:"email",maxLength:50,name:"email",autoComplete:"username",onChange:e=>a(e.target.value),placeholder:"Introduzca un email",required:!0})),n.createElement("div",{className:"form_div-group"},n.createElement("label",{htmlFor:"password"},"Password"),n.createElement("input",{id:"password",type:"password",maxLength:50,name:"password",autoComplete:"current-password",onChange:e=>o(e.target.value),placeholder:"Introduzca una password",required:!0})),n.createElement("button",{className:"form_btn-submit",type:"submit",onClick:a=>{a.preventDefault(),e(u({email:t,password:r})).then((e=>{const t=e.payload.errors;t&&t.forEach((e=>{N.Am.error("Error :"+e.msg)})),c("app")})).catch((e=>{N.Am.err(e)}))}},"Login")))))},I=function(){const e=(0,_.I0)(),{survey:t}=(0,_.v9)((e=>e.survey)),a=m("user"),r=m("token");return(0,n.useEffect)((()=>{(0,n.startTransition)((()=>{e(v(r))}))}),[e]),Object.entries(t).map((t=>{let[l,o]=t;return n.createElement("div",{id:"survey-container",key:o.Id_encuesta},n.createElement("div",{className:"tabla"},n.createElement("div",{className:"tabla_fila"},n.createElement("div",{className:"tabla_columna"},n.createElement("h2",null,"DNI")),n.createElement("div",{className:"tabla_columna"},n.createElement("h2",null,"PRODUCTO")),n.createElement("div",{className:"tabla_columna"},n.createElement("h2",null,"MANTENIMIENTO")),n.createElement("div",{className:"tabla_columna"},n.createElement("h2",null,"TIPO MANTENIMIENTO")),n.createElement("div",{className:"tabla_columna"},n.createElement("h2",null,"ESTADO")),n.createElement("div",{className:"tabla_columna"},n.createElement("h2",null,"ID SUBPROUDCTO")),n.createElement("div",{className:"tabla_columna"},n.createElement("h2",null,"FECHA CREACION"))),n.createElement("div",{className:"tabla_fila2"},n.createElement("div",{className:"tabla_columna"},n.createElement("h2",null,o.Dni)),n.createElement("div",{className:"tabla_columna"},n.createElement("h2",null,o.Producto)),n.createElement("div",{className:"tabla_columna"},n.createElement("h2",null,o.Mantenimiento)),n.createElement("div",{className:"tabla_columna"},n.createElement("h2",null,o.Tipo_mantenimiento)),n.createElement("div",{className:"tabla_columna"},n.createElement("h2",null,o.Estado)),n.createElement("div",{className:"tabla_columna"},n.createElement("h2",null,o.Id_subproducto)),n.createElement("div",{className:"tabla_columna"},n.createElement("h2",null,o.Fecha_creacion)))),"admin"==a.rol?n.createElement("button",{type:"button",onClick:()=>(t=>{const a={token:r,id_encuesta:t};(0,n.startTransition)((()=>{e(h(a)).then((e=>{const t=e.payload.data.msg;N.Am.success(t)}))}))})(o.Id_encuesta),className:"btn_mobile-remove"},n.createElement("span",null,"Eliminar Encuesta")):n.createElement(n.Fragment,null))}))},j=function(){const e=m("user"),t=(0,l.s0)();return n.createElement("div",{id:"navbar"},n.createElement("ul",{className:"navbar_ul"},n.createElement("li",{className:"navbar_li"},n.createElement(o.OL,{className:"nav-route",to:"/app"},"Home")),n.createElement("li",{className:"navbar_li"},n.createElement(o.OL,{className:"nav-route",to:"/create"},"Crear")),"admin"==e.rol?n.createElement(n.Fragment,null,n.createElement("li",{className:"navbar_li"},n.createElement(o.OL,{className:"nav-route",to:"/update"},"Actualizar"))):n.createElement(n.Fragment,null),n.createElement("li",{className:"navbar_li"},n.createElement(o.OL,{className:"nav-route",to:"/login",onClick:e=>{e.preventDefault(),localStorage.clear(),t("/")}},"Salir"))))},A=function(){return n.createElement(n.Fragment,null,n.createElement(j,null),n.createElement("div",{id:"home"},n.createElement("h1",null,"Lista de encuestas"),n.createElement(I,null)))},T=function(){const e=(0,_.I0)();return n.createElement("section",{className:"formSurvey__container"},n.createElement("form",{className:"formSurvey__form",onSubmit:t=>{(t=>{t.preventDefault();const a=Object.fromEntries(new FormData(t.target));e(f(a)).then((e=>{const t=e.payload.errors;t?t.forEach((e=>{N.Am.error("Error :"+e.msg)})):N.Am.success(e.payload.data)})).catch((e=>{N.Am.error(e)}))})(t)}},n.createElement("div",{className:"formSurvey__box"},n.createElement("label",{id:"name-label",htmlFor:"dni"},"DNI",n.createElement("input",{id:"dni",type:"text",name:"dni",placeholder:"Introduzca su dni",required:!0}))),n.createElement("div",{className:"formSurvey__box"},n.createElement("label",{id:"name-label",htmlFor:"producto"},"Producto",n.createElement("input",{id:"producto",type:"text",name:"producto",placeholder:"Introduzca un producto",required:!0}))),n.createElement("div",{className:"formSurvey__box"},n.createElement("label",{id:"name-label",htmlFor:"mantenimiento"},"Mantenimiento",n.createElement("select",{id:"mantenimiento",name:"mantenimiento",defaultValue:""},n.createElement("option",{value:"",disabled:!0},"Elija una opcion"),n.createElement("option",{value:"SI"},"Sí"),n.createElement("option",{value:"NO",selected:!0},"No")))),n.createElement("div",{className:"formSurvey__box"},n.createElement("label",{id:"name-label",htmlFor:"tipo_mantenimiento"},"Tipo de Mantenimiento",n.createElement("input",{id:"tipo_mantenimiento",type:"text",name:"tipo_mantenimiento",placeholder:"Introduzca un tipo de mantenimiento"}))),n.createElement("div",{className:"formSurvey__box"},n.createElement("label",{id:"name-label",htmlFor:"estado"},"Estado",n.createElement("select",{id:"estado",name:"estado",defaultValue:""},n.createElement("option",{value:"",disabled:!0},"Elija una opcion"),n.createElement("option",{value:"VENDIDO"},"VENDIDO"),n.createElement("option",{value:"NO VENDIDO",selected:!0},"NO VENDIDO"),n.createElement("option",{value:"EN PROCESO",selected:!0},"EN PROCESO"),n.createElement("option",{value:"NO VÁLIDO",selected:!0},"NO VÁLIDO")))),n.createElement("div",{className:"formSurvey__box"},n.createElement("button",null,"Crear"))))},D=function(){return n.createElement(n.Fragment,null,n.createElement(j,null),n.createElement(T,null))},x=function(){return n.createElement(n.Fragment,null,n.createElement(NavBar,null),n.createElement("div",{id:"home"},n.createElement("h1",null,"SOY UPDATE")))},P=!!m("token"),F=(((e,t)=>{if(t)(0,O.Z)(e).rol})(m("token"),P),e=>{let{element:t}=e;const a=(0,l.TH)();return P?t:n.createElement(l.Fg,{to:"/",replace:!0,state:{from:a}})}),k=(0,l.i7)(n.createElement(n.Fragment,null,n.createElement(l.AW,{path:"/",element:n.createElement(C,null)}),n.createElement(l.AW,{path:"login",element:n.createElement(C,null)}),n.createElement(l.AW,{path:"/"},n.createElement(l.AW,{path:"app",element:n.createElement(F,{element:n.createElement(A,null)})}),n.createElement(l.AW,{path:"create",element:n.createElement(F,{element:n.createElement(D,null)})}),n.createElement(l.AW,{path:"update",element:n.createElement(F,{element:n.createElement(x,null)})})))),L=(0,o.aj)(k);r.createRoot(document.getElementById("root")).render(n.createElement(_.zt,{store:g},n.createElement(N.Ix,{autoClose:2e3}),n.createElement(n.StrictMode,null,n.createElement(n.Suspense,{fallback:n.createElement("h1",null,"Loading...")},n.createElement(o.pG,{router:L})))))},866:e=>{e.exports={getAuthUser:async e=>{const{email:t,password:a}=e,n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:a})};try{const e=await fetch("http://localhost:3445/api/v1/auth/login",n);return await e.json()}catch(e){console.error(e)}}}}},r={};function l(e){var t=r[e];if(void 0!==t)return t.exports;var a=r[e]={exports:{}};return n[e](a,a.exports,l),a.exports}l.m=n,e=[],l.O=(t,a,n,r)=>{if(!a){var o=1/0;for(m=0;m<e.length;m++){for(var[a,n,r]=e[m],c=!0,s=0;s<a.length;s++)(!1&r||o>=r)&&Object.keys(l.O).every((e=>l.O[e](a[s])))?a.splice(s--,1):(c=!1,r<o&&(o=r));if(c){e.splice(m--,1);var i=n();void 0!==i&&(t=i)}}return t}r=r||0;for(var m=e.length;m>0&&e[m-1][2]>r;m--)e[m]=e[m-1];e[m]=[a,n,r]},a=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,l.t=function(e,n){if(1&n&&(e=this(e)),8&n)return e;if("object"==typeof e&&e){if(4&n&&e.__esModule)return e;if(16&n&&"function"==typeof e.then)return e}var r=Object.create(null);l.r(r);var o={};t=t||[null,a({}),a([]),a(a)];for(var c=2&n&&e;"object"==typeof c&&!~t.indexOf(c);c=a(c))Object.getOwnPropertyNames(c).forEach((t=>o[t]=()=>e[t]));return o.default=()=>e,l.d(r,o),r},l.d=(e,t)=>{for(var a in t)l.o(t,a)&&!l.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},l.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),l.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;l.g.importScripts&&(e=l.g.location+"");var t=l.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var a=t.getElementsByTagName("script");if(a.length)for(var n=a.length-1;n>-1&&!e;)e=a[n--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),l.p=e})(),(()=>{var e={179:0};l.O.j=t=>0===e[t];var t=(t,a)=>{var n,r,[o,c,s]=a,i=0;if(o.some((t=>0!==e[t]))){for(n in c)l.o(c,n)&&(l.m[n]=c[n]);if(s)var m=s(l)}for(t&&t(a);i<o.length;i++)r=o[i],l.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return l.O(m)},a=self.webpackChunkappfronted=self.webpackChunkappfronted||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var o=l.O(void 0,[736,716],(()=>l(383)));o=l.O(o)})();
//# sourceMappingURL=main.6afb3c27ce30ba214b85.js.map