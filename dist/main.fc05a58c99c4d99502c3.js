(()=>{var e,t,a,n,r,l={272:(e,t,a)=>{"use strict";a.d(t,{Z:()=>c});var n=a(294),r=(a(998),a(335)),l=a(655),o=a(744);const c=function(){const e=(0,o.$)("user"),t=(0,r.s0)();return n.createElement("div",{id:"navbar"},n.createElement("ul",{className:"navbar_ul"},n.createElement("li",{className:"navbar_li"},n.createElement(l.OL,{className:"nav-route",to:"/app"},"Home")),n.createElement("li",{className:"navbar_li"},n.createElement(l.OL,{className:"nav-route",to:"/create"},"Crear")),"admin"==e.rol?n.createElement(n.Fragment,null,n.createElement("li",{className:"navbar_li"},n.createElement(l.OL,{className:"nav-route",to:"/update"},"Actualizar"))):n.createElement(n.Fragment,null),n.createElement("li",{className:"navbar_li"},n.createElement(l.OL,{className:"nav-route",to:"/login",onClick:e=>{e.preventDefault(),localStorage.clear(),t("/")}},"Salir"))))}},917:(e,t,a)=>{"use strict";var n=a(294),r=a(745),l=a(335),o=a(655),c=a(633),s=a(854),i=a(980);const u=(0,c.xC)({reducer:{login:s.ZP,survey:i.ZP}});var m=a(998),d=(a(755),a(744));a(497),(0,d.$)("token");var p=a(510),v=a(953);a(302);const E=(0,n.lazy)((()=>Promise.resolve().then(a.bind(a,755)))),h=(0,n.lazy)((()=>Promise.resolve().then(a.bind(a,497)))),f=(0,n.lazy)((()=>a.e(88).then(a.bind(a,88)))),g=!!(0,d.$)("token"),y=((0,p.hh)((0,d.$)("token"),g),e=>{let{element:t,...a}=e;return g?t:n.createElement(l.Fg,{to:"/login",replace:!0,state:{from:a.location}})});let b=(0,l.i7)(n.createElement(n.Fragment,null,n.createElement(l.AW,{path:"/",element:n.createElement(E,null)}),n.createElement(l.AW,{path:"/login",element:n.createElement(E,null)}),n.createElement(l.AW,{path:"/"},n.createElement(l.AW,{path:"app",element:n.createElement(y,{element:n.createElement(n.Suspense,{fallback:n.createElement("div",null,"Loading...")},n.createElement(h,null))})}),n.createElement(l.AW,{path:"create",element:n.createElement(y,{element:n.createElement(n.Suspense,{fallback:n.createElement("div",null,"Loading...")},n.createElement(f,null))})}))));const _=(0,o.aj)(b);r.createRoot(document.getElementById("root")).render(n.createElement(m.zt,{store:u},n.createElement(v.Ix,{autoClose:2e3}),n.createElement(n.StrictMode,null,n.createElement(o.pG,{router:_}))))},497:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>u});var n=a(294),r=a(998),l=a(980),o=a(744),c=(a(510),a(953));const s=function(){const e=(0,r.I0)(),{survey:t}=(0,r.v9)((e=>e.survey)),a=(0,o.$)("user"),s=(0,o.$)("token");return(0,n.useEffect)((()=>{(0,n.startTransition)((()=>{e((0,l.LA)(s))}))}),[e]),Object.entries(t).map((t=>{let[r,o]=t;return n.createElement("div",{id:"survey-container",key:o.Id_encuesta},n.createElement("div",{className:"tabla"},n.createElement("div",{className:"tabla_fila"},n.createElement("div",{className:"tabla_columna"},n.createElement("h2",null,"DNI")),n.createElement("div",{className:"tabla_columna"},n.createElement("h2",null,"PRODUCTO")),n.createElement("div",{className:"tabla_columna"},n.createElement("h2",null,"MANTENIMIENTO")),n.createElement("div",{className:"tabla_columna"},n.createElement("h2",null,"TIPO MANTENIMIENTO")),n.createElement("div",{className:"tabla_columna"},n.createElement("h2",null,"ESTADO")),n.createElement("div",{className:"tabla_columna"},n.createElement("h2",null,"ID SUBPROUDCTO")),n.createElement("div",{className:"tabla_columna"},n.createElement("h2",null,"FECHA CREACION"))),n.createElement("div",{className:"tabla_fila2"},n.createElement("div",{className:"tabla_columna"},n.createElement("h2",null,o.Dni)),n.createElement("div",{className:"tabla_columna"},n.createElement("h2",null,o.Producto)),n.createElement("div",{className:"tabla_columna"},n.createElement("h2",null,o.Mantenimiento)),n.createElement("div",{className:"tabla_columna"},n.createElement("h2",null,o.Tipo_mantenimiento)),n.createElement("div",{className:"tabla_columna"},n.createElement("h2",null,o.Estado)),n.createElement("div",{className:"tabla_columna"},n.createElement("h2",null,o.Id_subproducto)),n.createElement("div",{className:"tabla_columna"},n.createElement("h2",null,o.Fecha_creacion)))),"admin"==a.rol?n.createElement("button",{type:"button",onClick:()=>(t=>{const a={token:s,id_encuesta:t};(0,n.startTransition)((()=>{e((0,l.Gn)(a)).then((e=>{const t=e.payload.data.msg;c.Am.success(t)}))}))})(o.Id_encuesta),className:"btn_mobile-remove"},n.createElement("span",null,"Eliminar Encuesta")):n.createElement(n.Fragment,null))}))};var i=a(272);const u=function(){return n.createElement(n.Fragment,null,n.createElement(i.Z,null),n.createElement("div",{id:"home"},n.createElement("h1",null,"Lista de encuestas"),n.createElement(s,null)))}},755:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>u});var n=a(294),r=a(998),l=a(854),o=a(335),c=(a(510),a(953));const s=a.p+"public/assets/img/bf67b35ec7c66971de982c668f197544.jpg";var i=a(6);const u=function(){const e=(0,r.I0)(),[t,a]=(0,n.useState)(""),[u,m]=(0,n.useState)(""),d=(0,o.s0)();return n.createElement("div",{id:"main"},n.createElement("div",{id:"main_container-portada"},n.createElement(i.LazyLoadImage,{src:s,id:"img_portada",alt:"Portada gas"})),n.createElement("div",{id:"main_container_form"},n.createElement("form",{id:"form"},n.createElement("div",{className:"form_div"},n.createElement("div",{className:"form_div-group"},n.createElement("label",{htmlFor:"email"},"Email"),n.createElement("input",{id:"email",type:"email",maxLength:50,name:"email",autoComplete:"username",onChange:e=>a(e.target.value),placeholder:"Introduzca un email",required:!0})),n.createElement("div",{className:"form_div-group"},n.createElement("label",{htmlFor:"password"},"Password"),n.createElement("input",{id:"password",type:"password",maxLength:50,name:"password",autoComplete:"current-password",onChange:e=>m(e.target.value),placeholder:"Introduzca una password",required:!0})),n.createElement("button",{className:"form_btn-submit",type:"submit",onClick:a=>{a.preventDefault();const n={email:t,password:u};e((0,l.uL)(n)).then((e=>{const t=e.payload.errors;t?t.forEach((e=>{c.Am.error("Error :"+e.msg)})):c.Am.success(e.payload.data),d("/app")})).catch((e=>{c.Am.err(e)}))}},"Login")))))}},866:e=>{e.exports={getAuthUser:async e=>{const{email:t,password:a}=e,n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:a})};try{const e=await fetch("http://localhost:3445/api/v1/auth/login",n);return await e.json()}catch(e){console.error(e)}}}},854:(e,t,a)=>{"use strict";a.d(t,{ZP:()=>i,uL:()=>o});var n=a(633),r=a(866),l=a(744);const o=(0,n.hg)("loginSlice/fetchLogin",(async e=>{const t=await(0,r.getAuthUser)(e);return(0,l.n)("token",t.token),t})),c=(0,n.oM)({name:"login",initialState:{user:[]},reducers:{},extraReducers:e=>{e.addCase(o.pending,(e=>{e.status="loading"})).addCase(o.fulfilled,((e,t)=>{e.status="success",e.user=t.payload.data,(0,l.n)("user",t.payload.data)})).addCase(o.rejected,(e=>{e.status="failed"}))}}),{login:s}=c.actions,i=c.reducer},980:(e,t,a)=>{"use strict";a.d(t,{Vb:()=>o,ZP:()=>i,Gn:()=>c,LA:()=>l});var n=a(633),r=a(744);const l=(0,n.hg)("surveySlice/fetchSurvey",(async e=>await(async e=>{const t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"BEARER "+e}};try{const e=await fetch("http://localhost:3445/api/v1/survey",t);return await e.json()}catch(e){console.error(e)}})(e))),o=(0,n.hg)("surveySlice/createSurvey",(async e=>await(async e=>{const{dni:t,producto:a,mantenimiento:n,tipo_mantenimiento:l,estado:o}=e,c={method:"POST",headers:{"Content-Type":"application/json",Authorization:"BEARER "+(0,r.$)("token")},body:JSON.stringify({dni:t,mantenimiento:n,tipo_mantenimiento:l,producto:a,estado:o,id_subproducto:""})};try{const e=await fetch("http://localhost:3445/api/v1/survey/create",c),t=await e.json();return console.log(t),t}catch(e){console.error(e)}})(e))),c=(0,n.hg)("surveySlice/deleteSurvey",(async e=>{const t=await(async e=>{const{id_encuesta:t,token:a}=e,n={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"BEARER "+a}};try{const e=await fetch(`http://localhost:3445/api/v1/survey/delete/${t}`,n);return await e.json()}catch(e){console.error(e)}})(e);return t})),s=(0,n.oM)({name:"survey",initialState:{survey:[],status:"idle"},reducers:{},extraReducers:e=>{e.addCase(l.pending,(e=>{e.status="loading"})),e.addCase(l.fulfilled,((e,t)=>{e.status="success",e.survey=t.payload.data})),e.addCase(l.rejected,(e=>{e.status="failed"})),e.addCase(c.pending,(e=>{e.status="loading"})),e.addCase(c.fulfilled,((e,t)=>{e.status="success";const a=e.survey.findIndex((e=>e.id_encuesta===t.payload.id));e.survey.splice(a,1)})),e.addCase(c.rejected,(e=>{e.status="failed"})),e.addCase(o.pending,(e=>{e.status="loading"})),e.addCase(o.fulfilled,((e,t)=>{e.status="success"})),e.addCase(o.rejected,(e=>{e.status="failed"}))}}),{}=s.actions,i=s.reducer},510:(e,t,a)=>{"use strict";a.d(t,{hh:()=>r}),a(294);var n=a(245);const r=(e,t)=>!!t&&("admin"==(0,n.Z)(e).rol?"admin":"user")},744:(e,t,a)=>{"use strict";a.d(t,{$:()=>r,n:()=>n});const n=(e,t)=>{try{window.localStorage.setItem(e,JSON.stringify(t))}catch(e){console.log(e)}},r=e=>{try{const t=window.localStorage.getItem(e);if("undefined"!=t)return JSON.parse(t)}catch(e){console.log(e)}}}},o={};function c(e){var t=o[e];if(void 0!==t)return t.exports;var a=o[e]={exports:{}};return l[e](a,a.exports,c),a.exports}c.m=l,e=[],c.O=(t,a,n,r)=>{if(!a){var l=1/0;for(u=0;u<e.length;u++){for(var[a,n,r]=e[u],o=!0,s=0;s<a.length;s++)(!1&r||l>=r)&&Object.keys(c.O).every((e=>c.O[e](a[s])))?a.splice(s--,1):(o=!1,r<l&&(l=r));if(o){e.splice(u--,1);var i=n();void 0!==i&&(t=i)}}return t}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[a,n,r]},c.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return c.d(t,{a:t}),t},a=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,c.t=function(e,n){if(1&n&&(e=this(e)),8&n)return e;if("object"==typeof e&&e){if(4&n&&e.__esModule)return e;if(16&n&&"function"==typeof e.then)return e}var r=Object.create(null);c.r(r);var l={};t=t||[null,a({}),a([]),a(a)];for(var o=2&n&&e;"object"==typeof o&&!~t.indexOf(o);o=a(o))Object.getOwnPropertyNames(o).forEach((t=>l[t]=()=>e[t]));return l.default=()=>e,c.d(r,l),r},c.d=(e,t)=>{for(var a in t)c.o(t,a)&&!c.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},c.f={},c.e=e=>Promise.all(Object.keys(c.f).reduce(((t,a)=>(c.f[a](e,t),t)),[])),c.u=e=>e+".7aebb44b4376a50e127d.chunk.js",c.miniCssF=e=>{},c.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),c.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n={},r="appfronted:",c.l=(e,t,a,l)=>{if(n[e])n[e].push(t);else{var o,s;if(void 0!==a)for(var i=document.getElementsByTagName("script"),u=0;u<i.length;u++){var m=i[u];if(m.getAttribute("src")==e||m.getAttribute("data-webpack")==r+a){o=m;break}}o||(s=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,c.nc&&o.setAttribute("nonce",c.nc),o.setAttribute("data-webpack",r+a),o.src=e),n[e]=[t];var d=(t,a)=>{o.onerror=o.onload=null,clearTimeout(p);var r=n[e];if(delete n[e],o.parentNode&&o.parentNode.removeChild(o),r&&r.forEach((e=>e(a))),t)return t(a)},p=setTimeout(d.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=d.bind(null,o.onerror),o.onload=d.bind(null,o.onload),s&&document.head.appendChild(o)}},c.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;c.g.importScripts&&(e=c.g.location+"");var t=c.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var a=t.getElementsByTagName("script");if(a.length)for(var n=a.length-1;n>-1&&!e;)e=a[n--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),c.p=e})(),(()=>{var e={179:0};c.f.j=(t,a)=>{var n=c.o(e,t)?e[t]:void 0;if(0!==n)if(n)a.push(n[2]);else{var r=new Promise(((a,r)=>n=e[t]=[a,r]));a.push(n[2]=r);var l=c.p+c.u(t),o=new Error;c.l(l,(a=>{if(c.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var r=a&&("load"===a.type?"missing":a.type),l=a&&a.target&&a.target.src;o.message="Loading chunk "+t+" failed.\n("+r+": "+l+")",o.name="ChunkLoadError",o.type=r,o.request=l,n[1](o)}}),"chunk-"+t,t)}},c.O.j=t=>0===e[t];var t=(t,a)=>{var n,r,[l,o,s]=a,i=0;if(l.some((t=>0!==e[t]))){for(n in o)c.o(o,n)&&(c.m[n]=o[n]);if(s)var u=s(c)}for(t&&t(a);i<l.length;i++)r=l[i],c.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return c.O(u)},a=self.webpackChunkappfronted=self.webpackChunkappfronted||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var s=c.O(void 0,[736,716],(()=>c(917)));s=c.O(s)})();
//# sourceMappingURL=main.fc05a58c99c4d99502c3.js.map